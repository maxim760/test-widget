"use strict";var _excluded=["width","height","position"];function _objectWithoutProperties(e,t){if(null==e)return{};var i,r=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),o=0;o<n.length;o++)i=n[o],0<=t.indexOf(i)||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i]);return r}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var i,r={},n=Object.keys(e),o=0;o<n.length;o++)i=n[o],0<=t.indexOf(i)||(r[i]=e[i]);return r}function getWidget(){return document.querySelector("#sycret-widget")}window.addEventListener("message",onMessage);var height={small:"200px",big:"400px"},isStarted=!1;function getHeightBeforeStart(){return window.innerWidth<600?height.small:height.big}window.addEventListener("resize",onResize);var widget=getWidget();function onMessage(e){var t=e.data;!t||t&&"sycret"!==t.type||(e=getWidget(),isStarted="start"===t.status?(e.style.height=height.big,!0):(e.style.height=getHeightBeforeStart(),!1))}function onResize(){var e=getWidget();e&&(isStarted&&600<=window.innerWidth?e.style.height=height.big:!isStarted&&window.innerWidth<600&&(e.style.height=height.small))}function parseQuery(t){return Object.keys(t).filter(function(e){return t[e]}).map(function(e){return"".concat(e,"=").concat(t[e])}).join("&")}function openSycretCertificate(e){e=parseQuery(e);window.open("https://sycret.ru/service/onlinesale/?".concat(e),"_blank")}function setCoords(e,t,i,r){"top"===t?(e.style.top=0,e.style.left=0,e.style.right=0,e.style.width="100%",e.style.height=Math.min(r,window.innerHeight)+"px"):"bottom"===t?(e.style.bottom=0,e.style.left=0,e.style.right=0,e.style.width="100%",e.style.height=Math.min(r,window.innerHeight)+"px"):("left"===t?(e.style.bottom=0,e.style.top=0,e.style.height="100%",e.style.left=0):(e.style.bottom=0,e.style.top=0,e.style.height="100%",e.style.right=0),e.style.width=Math.min(i,window.innerWidth)+"px")}function removeFrame(){document.body.style.overflow=null;var e=document.querySelector("#wrapper-sycret-frame");e&&e.remove()}function openSycretFrame(e){window.removeEventListener("resize",onResize),window.removeEventListener("message",onMessage),document.body.style.overflow="hidden",window.addEventListener("message",function(e){e=e.data||{};"sycret"===e.type&&"close"===e.status&&removeFrame()});var t=e.width,i=e.height,r=e.position,n=_objectWithoutProperties(e,_excluded),o=document.createElement("div"),e=document.createElement("iframe");o.style.position="fixed",o.style.top=0,o.style.right=0,o.style.bottom=0,o.style.left=0,o.style.background="rgba(0, 0, 0, 0.3)",o.style.zIndex=9999,o.setAttribute("id","wrapper-sycret-frame");n=parseQuery(n);e.setAttribute("src","https://sycret.ru/service/onlinesale/?".concat(n,"&close=1")),e.setAttribute("frameborder","no"),e.style.position="absolute",e.addEventListener("click",function(e){return e.stopPropagation()}),o.addEventListener("click",removeFrame),setCoords(e,r,t,i),o.appendChild(e),document.body.appendChild(o)}widget&&(widget.style.height=getHeightBeforeStart());